{"version":3,"sources":["GameRankingList.js"],"names":["cc","Class","extends","Component","properties","rankingScrollView","ScrollView","scrollViewContent","Node","prefabRankItem","Prefab","prefabGameOverRank","gameOverRankLayout","loadingLabel","start","removeChild","window","wx","undefined","onMessage","log","data","messageType","fetchFriendData","MAIN_MENU_NUM","submitScore","score","gameOverRank","fetchGroupFriendData","shareTicket","getUserCloudStorage","keyList","success","getres","console","KVDataList","length","value","setUserCloudStorage","key","res","fail","complete","node","removeChildByTag","active","removeAllChildren","string","getUserInfo","openIdList","userRes","userData","getFriendCloudStorage","sort","a","b","i","playerInfo","item","instantiate","getComponent","init","addChild","avatarUrl","userItem","y","getGroupCloudStorage","width"],"mappings":"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","file":"GameRankingList.js","sourceRoot":"../../../../assets/Script","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        rankingScrollView: cc.ScrollView,\n        scrollViewContent: cc.Node,\n        prefabRankItem: cc.Prefab,\n        prefabGameOverRank: cc.Prefab,\n        gameOverRankLayout: cc.Node,\n        loadingLabel: cc.Node,//加载文字\n    },\n\n    start() {\n        this.removeChild();\n        if (window.wx != undefined) {\n            window.wx.onMessage(data => {\n                cc.log(\"接收主域发来消息：\", data)\n                if (data.messageType == 0) {//移除排行榜\n                    this.removeChild();\n                } else if (data.messageType == 1) {//获取好友排行榜\n                    this.fetchFriendData(data.MAIN_MENU_NUM);\n                } else if (data.messageType == 3) {//提交得分\n                    this.submitScore(data.MAIN_MENU_NUM, data.score);\n                } else if (data.messageType == 4) {//获取好友排行榜横向排列展示模式\n                    this.gameOverRank(data.MAIN_MENU_NUM);\n                } else if (data.messageType == 5) {//获取群排行榜\n                    this.fetchGroupFriendData(data.MAIN_MENU_NUM, data.shareTicket);\n                }\n            });\n        } else {\n            this.fetchFriendData(1000);\n            // this.gameOverRank(1000);\n        }\n    },\n    submitScore(MAIN_MENU_NUM, score) { //提交得分\n        if (window.wx != undefined) {\n            window.wx.getUserCloudStorage({\n                // 以key/value形式存储\n                keyList: [MAIN_MENU_NUM],\n                success: function (getres) {\n                    console.log('getUserCloudStorage', 'success', getres)\n                    if (getres.KVDataList.length != 0) {\n                        if (getres.KVDataList[0].value > score) {\n                            return;\n                        }\n                    }\n                    // 对用户托管数据进行写数据操作\n                    window.wx.setUserCloudStorage({\n                        KVDataList: [{key: MAIN_MENU_NUM, value: \"\" + score}],\n                        success: function (res) {\n                            console.log('setUserCloudStorage', 'success', res)\n                        },\n                        fail: function (res) {\n                            console.log('setUserCloudStorage', 'fail')\n                        },\n                        complete: function (res) {\n                            console.log('setUserCloudStorage', 'ok')\n                        }\n                    });\n                },\n                fail: function (res) {\n                    console.log('getUserCloudStorage', 'fail')\n                },\n                complete: function (res) {\n                    console.log('getUserCloudStorage', 'ok')\n                }\n            });\n        } else {\n            cc.log(\"提交得分:\" + MAIN_MENU_NUM + \" : \" + score)\n        }\n    },\n    removeChild() {\n        this.node.removeChildByTag(1000);\n        this.rankingScrollView.node.active = false;\n        this.scrollViewContent.removeAllChildren();\n        this.gameOverRankLayout.active = false;\n        this.gameOverRankLayout.removeAllChildren();\n        this.loadingLabel.string = \"玩命加载中...\";\n        this.loadingLabel.active = true;\n    },\n    fetchFriendData(MAIN_MENU_NUM) {\n        this.removeChild();\n        this.rankingScrollView.node.active = true;\n        if (window.wx != undefined) {\n            wx.getUserInfo({\n                openIdList: ['selfOpenId'],\n                success: (userRes) => {\n                    this.loadingLabel.active = false;\n                    console.log('success', userRes.data)\n                    let userData = userRes.data[0];\n                    //取出所有好友数据\n                    wx.getFriendCloudStorage({\n                        keyList: [MAIN_MENU_NUM],\n                        success: res => {\n                            console.log(\"wx.getFriendCloudStorage success\", res);\n                            let data = res.data;\n                            data.sort((a, b) => {\n                                if (a.KVDataList.length == 0 && b.KVDataList.length == 0) {\n                                    return 0;\n                                }\n                                if (a.KVDataList.length == 0) {\n                                    return 1;\n                                }\n                                if (b.KVDataList.length == 0) {\n                                    return -1;\n                                }\n                                return b.KVDataList[0].value - a.KVDataList[0].value;\n                            });\n                            for (let i = 0; i < data.length; i++) {\n                                var playerInfo = data[i];\n                                var item = cc.instantiate(this.prefabRankItem);\n                                item.getComponent('RankItem').init(i, playerInfo);\n                                this.scrollViewContent.addChild(item);\n                                if (data[i].avatarUrl == userData.avatarUrl) {\n                                    let userItem = cc.instantiate(this.prefabRankItem);\n                                    userItem.getComponent('RankItem').init(i, playerInfo);\n                                    userItem.y = -354;\n                                    this.node.addChild(userItem, 1, 1000);\n                                }\n                            }\n                        },\n                        fail: res => {\n                            console.log(\"wx.getFriendCloudStorage fail\", res);\n                            this.loadingLabel.string = \"数据加载失败，请检测网络，谢谢。\";\n                        },\n                    });\n                },\n                fail: (res) => {\n                    this.loadingLabel.string = \"数据加载失败，请检测网络，谢谢。\";\n                }\n            });\n        }\n    },\n    fetchGroupFriendData(MAIN_MENU_NUM, shareTicket) {\n        this.removeChild();\n        this.rankingScrollView.node.active = true;\n        if (window.wx != undefined) {\n            wx.getUserInfo({\n                openIdList: ['selfOpenId'],\n                success: (userRes) => {\n                    console.log('success', userRes.data)\n                    let userData = userRes.data[0];\n                    //取出所有好友数据\n                    wx.getGroupCloudStorage({\n                        shareTicket: shareTicket,\n                        keyList: [MAIN_MENU_NUM],\n                        success: res => {\n                            console.log(\"wx.getGroupCloudStorage success\", res);\n                            this.loadingLabel.active = false;\n                            let data = res.data;\n                            data.sort((a, b) => {\n                                if (a.KVDataList.length == 0 && b.KVDataList.length == 0) {\n                                    return 0;\n                                }\n                                if (a.KVDataList.length == 0) {\n                                    return 1;\n                                }\n                                if (b.KVDataList.length == 0) {\n                                    return -1;\n                                }\n                                return b.KVDataList[0].value - a.KVDataList[0].value;\n                            });\n                            for (let i = 0; i < data.length; i++) {\n                                var playerInfo = data[i];\n                                var item = cc.instantiate(this.prefabRankItem);\n                                item.getComponent('RankItem').init(i, playerInfo);\n                                this.scrollViewContent.addChild(item);\n                                if (data[i].avatarUrl == userData.avatarUrl) {\n                                    let userItem = cc.instantiate(this.prefabRankItem);\n                                    userItem.getComponent('RankItem').init(i, playerInfo);\n                                    userItem.y = -354;\n                                    this.node.addChild(userItem, 1, 1000);\n                                }\n                            }\n                        },\n                        fail: res => {\n                            console.log(\"wx.getFriendCloudStorage fail\", res);\n                            this.loadingLabel.string = \"数据加载失败，请检测网络，谢谢。\";\n                        },\n                    });\n                },\n                fail: (res) => {\n                    this.loadingLabel.string = \"数据加载失败，请检测网络，谢谢。\";\n                }\n            });\n        }\n    },\n\n    gameOverRank(MAIN_MENU_NUM) {\n        this.removeChild();\n        this.gameOverRankLayout.active = true;\n        if (window.wx != undefined) {\n            wx.getUserInfo({\n                openIdList: ['selfOpenId'],\n                success: (userRes) => {\n                    cc.log('success', userRes.data)\n                    let userData = userRes.data[0];\n                    //取出所有好友数据\n                    wx.getFriendCloudStorage({\n                        keyList: [MAIN_MENU_NUM],\n                        success: res => {\n                            cc.log(\"wx.getFriendCloudStorage success\", res);\n                            this.loadingLabel.active = false;\n                            let data = res.data;\n                            data.sort((a, b) => {\n                                if (a.KVDataList.length == 0 && b.KVDataList.length == 0) {\n                                    return 0;\n                                }\n                                if (a.KVDataList.length == 0) {\n                                    return 1;\n                                }\n                                if (b.KVDataList.length == 0) {\n                                    return -1;\n                                }\n                                return b.KVDataList[0].value - a.KVDataList[0].value;\n                            });\n                            for (let i = 0; i < data.length; i++) {\n                                if (data[i].avatarUrl == userData.avatarUrl) {\n                                    if ((i - 1) >= 0) {\n                                        if ((i + 1) >= data.length && (i - 2) >= 0) {\n                                            let userItem = cc.instantiate(this.prefabGameOverRank);\n                                            userItem.getComponent('GameOverRank').init(i - 2, data[i - 2]);\n                                            this.gameOverRankLayout.addChild(userItem);\n                                        }\n                                        let userItem = cc.instantiate(this.prefabGameOverRank);\n                                        userItem.getComponent('GameOverRank').init(i - 1, data[i - 1]);\n                                        this.gameOverRankLayout.addChild(userItem);\n                                    } else {\n                                        if ((i + 2) >= data.length) {\n                                            let node = new cc.Node();\n                                            node.width = 200;\n                                            this.gameOverRankLayout.addChild(node);\n                                        }\n                                    }\n                                    let userItem = cc.instantiate(this.prefabGameOverRank);\n                                    userItem.getComponent('GameOverRank').init(i, data[i], true);\n                                    this.gameOverRankLayout.addChild(userItem);\n                                    if ((i + 1) < data.length) {\n                                        let userItem = cc.instantiate(this.prefabGameOverRank);\n                                        userItem.getComponent('GameOverRank').init(i + 1, data[i + 1]);\n                                        this.gameOverRankLayout.addChild(userItem);\n                                        if ((i - 1) < 0 && (i + 2) < data.length) {\n                                            let userItem = cc.instantiate(this.prefabGameOverRank);\n                                            userItem.getComponent('GameOverRank').init(i + 2, data[i + 2]);\n                                            this.gameOverRankLayout.addChild(userItem);\n                                        }\n                                    }\n                                }\n                            }\n                        },\n                        fail: res => {\n                            console.log(\"wx.getFriendCloudStorage fail\", res);\n                            this.loadingLabel.string = \"数据加载失败，请检测网络，谢谢。\";\n                        },\n                    });\n                },\n                fail: (res) => {\n                    this.loadingLabel.string = \"数据加载失败，请检测网络，谢谢。\";\n                }\n            });\n        }\n    },\n});\n"]}