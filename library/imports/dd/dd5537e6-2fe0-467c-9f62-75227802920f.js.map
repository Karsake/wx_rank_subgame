{"version":3,"sources":["../../../../assets/Script/assets/Script/RankItem.js"],"names":["cc","Class","extends","Component","name","properties","backSprite","Node","rankLabel","Label","avatarImgSprite","Sprite","nickLabel","topScoreLabel","crownImage","start","init","rank","data","avatarUrl","nick","nickname","grade","KVDataList","length","value","active","node","color","Color","string","toString","createImage","window","wx","undefined","image","onload","texture","Texture2D","initWithElement","handleLoadedTexture","spriteFrame","SpriteFrame","e","log","src","loader","load","url","type","err"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,UAAM,UAFD;AAGLC,gBAAY;AACRC,oBAAYN,GAAGO,IADP;AAERC,mBAAWR,GAAGS,KAFN;AAGRC,yBAAiBV,GAAGW,MAHZ;AAIRC,mBAAWZ,GAAGS,KAJN;AAKRI,uBAAeb,GAAGS,KALV;AAMRK,oBAAYd,GAAGO;AANP,KAHP;AAWLQ,SAXK,mBAWG,CAEP,CAbI;;;AAeLC,UAAM,cAAUC,IAAV,EAAgBC,IAAhB,EAAsB;AACxB,YAAIC,YAAYD,KAAKC,SAArB;AACA;AACA,YAAIC,OAAOF,KAAKG,QAAhB;AACA,YAAIC,QAAQJ,KAAKK,UAAL,CAAgBC,MAAhB,IAA0B,CAA1B,GAA8BN,KAAKK,UAAL,CAAgB,CAAhB,EAAmBE,KAAjD,GAAyD,CAArE;;AAEA;AACA;AACA;AACA;AACA;AACI;AACA;AACJ;AACI;AACA;AACJ;AACI;AACA;AACJ;;AAEA,YAAIR,OAAO,CAAX,EAAc;AACV,iBAAKH,UAAL,CAAgBY,MAAhB,GAAyB,IAAzB;AACA,iBAAKlB,SAAL,CAAemB,IAAf,CAAoBC,KAApB,GAA4B,IAAI5B,GAAG6B,KAAP,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,GAAtB,CAA5B;AACH;AACD,aAAKrB,SAAL,CAAesB,MAAf,GAAwB,CAACb,OAAO,CAAR,EAAWc,QAAX,EAAxB;AACA,aAAKC,WAAL,CAAiBb,SAAjB;AACA,aAAKP,SAAL,CAAekB,MAAf,GAAwBV,IAAxB;AACA,aAAKP,aAAL,CAAmBiB,MAAnB,GAA4B,MAAIR,MAAMS,QAAN,EAAJ,GAAqB,GAAjD;AACH,KA5CI;AA6CLC,eA7CK,uBA6COb,SA7CP,EA6CkB;AAAA;;AACnB,YAAIc,OAAOC,EAAP,IAAaC,SAAjB,EAA4B;AACxB,gBAAI;AACA,oBAAIC,QAAQF,GAAGF,WAAH,EAAZ;AACAI,sBAAMC,MAAN,GAAe,YAAM;AACjB,wBAAI;AACA,4BAAIC,UAAU,IAAItC,GAAGuC,SAAP,EAAd;AACAD,gCAAQE,eAAR,CAAwBJ,KAAxB;AACAE,gCAAQG,mBAAR;AACA,8BAAK/B,eAAL,CAAqBgC,WAArB,GAAmC,IAAI1C,GAAG2C,WAAP,CAAmBL,OAAnB,CAAnC;AACH,qBALD,CAKE,OAAOM,CAAP,EAAU;AACR5C,2BAAG6C,GAAH,CAAOD,CAAP;AACA,8BAAKlC,eAAL,CAAqBiB,IAArB,CAA0BD,MAA1B,GAAmC,KAAnC;AACH;AACJ,iBAVD;AAWAU,sBAAMU,GAAN,GAAY3B,SAAZ;AACH,aAdD,CAcC,OAAOyB,CAAP,EAAU;AACP5C,mBAAG6C,GAAH,CAAOD,CAAP;AACA,qBAAKlC,eAAL,CAAqBiB,IAArB,CAA0BD,MAA1B,GAAmC,KAAnC;AACH;AACJ,SAnBD,MAmBO;AACH1B,eAAG+C,MAAH,CAAUC,IAAV,CAAe;AACXC,qBAAK9B,SADM,EACK+B,MAAM;AADX,aAAf,EAEG,UAACC,GAAD,EAAMb,OAAN,EAAkB;AACjB,sBAAK5B,eAAL,CAAqBgC,WAArB,GAAmC,IAAI1C,GAAG2C,WAAP,CAAmBL,OAAnB,CAAnC;AACH,aAJD;AAKH;AACJ;AAxEI,CAAT","file":"RankItem.js","sourceRoot":"../../../../assets/Script","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    name: \"RankItem\",\n    properties: {\n        backSprite: cc.Node,\n        rankLabel: cc.Label,\n        avatarImgSprite: cc.Sprite,\n        nickLabel: cc.Label,\n        topScoreLabel: cc.Label,\n        crownImage: cc.Node,\n    },\n    start() {\n\n    },\n\n    init: function (rank, data) {\n        let avatarUrl = data.avatarUrl;\n        // let nick = data.nickname.length <= 10 ? data.nickname : data.nickname.substr(0, 10) + \"...\";\n        let nick = data.nickname;\n        let grade = data.KVDataList.length != 0 ? data.KVDataList[0].value : 0;\n\n        // if (rank % 2 == 0) {\n        //     this.backSprite.color = new cc.Color(55, 55, 55, 255);\n        // }\n        // this.rankLabel.node.color = new cc.Color(255, 255, 255, 255);\n        // if (rank == 0) {\n            // this.rankLabel.node.color = new cc.Color(255, 0, 0, 255);\n            // this.rankLabel.node.setScale(2);\n        // } else if (rank == 1) {\n            // this.rankLabel.node.color = new cc.Color(255, 255, 0, 255);\n            // this.rankLabel.node.setScale(1.6);\n        // } else if (rank == 2) {\n            // this.rankLabel.node.color = new cc.Color(100, 255, 0, 255);\n            // this.rankLabel.node.setScale(1.3);\n        // }\n\n        if (rank < 3) {\n            this.crownImage.active = true;\n            this.rankLabel.node.color = new cc.Color(0, 0, 0, 255);\n        }\n        this.rankLabel.string = (rank + 1).toString();\n        this.createImage(avatarUrl);\n        this.nickLabel.string = nick;\n        this.topScoreLabel.string = \"第\"+grade.toString()+\"关\";\n    },\n    createImage(avatarUrl) {\n        if (window.wx != undefined) {\n            try {\n                let image = wx.createImage();\n                image.onload = () => {\n                    try {\n                        let texture = new cc.Texture2D();\n                        texture.initWithElement(image);\n                        texture.handleLoadedTexture();\n                        this.avatarImgSprite.spriteFrame = new cc.SpriteFrame(texture);\n                    } catch (e) {\n                        cc.log(e);\n                        this.avatarImgSprite.node.active = false;\n                    }\n                };\n                image.src = avatarUrl;\n            }catch (e) {\n                cc.log(e);\n                this.avatarImgSprite.node.active = false;\n            }\n        } else {\n            cc.loader.load({\n                url: avatarUrl, type: 'jpg'\n            }, (err, texture) => {\n                this.avatarImgSprite.spriteFrame = new cc.SpriteFrame(texture);\n            });\n        }\n    }\n\n});\n"]}