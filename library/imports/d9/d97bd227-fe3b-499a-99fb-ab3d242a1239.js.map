{"version":3,"sources":["../../../../assets/Script/assets/Script/GameOverRank.js"],"names":["cc","Class","extends","Component","name","properties","backSprite","Node","rankLabel","Label","avatarImgSprite","Sprite","nickLabel","topScoreLabel","init","rank","data","isPlayer","avatarUrl","nick","nickname","grade","KVDataList","length","value","color","Color","node","string","toString","createImage","window","wx","undefined","image","onload","texture","Texture2D","initWithElement","handleLoadedTexture","spriteFrame","SpriteFrame","e","log","active","src","loader","load","url","type","err"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,UAAM,cAFD;AAGLC,gBAAY;AACRC,oBAAYN,GAAGO,IADP;AAERC,mBAAWR,GAAGS,KAFN;AAGRC,yBAAiBV,GAAGW,MAHZ;AAIRC,mBAAWZ,GAAGS,KAJN;AAKRI,uBAAeb,GAAGS;AALV,KAHP;;AAWLK,UAAM,cAAUC,IAAV,EAAgBC,IAAhB,EAAqBC,QAArB,EAA+B;AACjC,YAAIC,YAAYF,KAAKE,SAArB;AACA;AACA,YAAIC,OAAOH,KAAKI,QAAhB;AACA,YAAIC,QAAQL,KAAKM,UAAL,CAAgBC,MAAhB,IAA0B,CAA1B,GAA8BP,KAAKM,UAAL,CAAgB,CAAhB,EAAmBE,KAAjD,GAAyD,CAArE;;AAEA,YAAIT,OAAO,CAAP,IAAY,CAAhB,EAAmB;AACf,iBAAKT,UAAL,CAAgBmB,KAAhB,GAAwB,IAAIzB,GAAG0B,KAAP,CAAa,GAAb,EAAiB,GAAjB,EAAsB,GAAtB,EAA2B,GAA3B,CAAxB;AACH;AACD,YAAIT,QAAJ,EAAc;AACV,iBAAKT,SAAL,CAAemB,IAAf,CAAoBF,KAApB,GAA4B,IAAIzB,GAAG0B,KAAP,CAAa,CAAb,EAAgB,GAAhB,EAAqB,CAArB,EAAwB,GAAxB,CAA5B;AACH;AACD,aAAKlB,SAAL,CAAeoB,MAAf,GAAwB,CAACb,OAAO,CAAR,EAAWc,QAAX,EAAxB;AACA,aAAKC,WAAL,CAAiBZ,SAAjB;AACA,aAAKN,SAAL,CAAegB,MAAf,GAAwBT,IAAxB;AACA,aAAKN,aAAL,CAAmBe,MAAnB,GAA4BP,MAAMQ,QAAN,EAA5B;AACH,KA3BI;AA4BLC,eA5BK,uBA4BOZ,SA5BP,EA4BkB;AAAA;;AACnB,YAAIa,OAAOC,EAAP,IAAaC,SAAjB,EAA4B;AACxB,gBAAI;AACA,oBAAIC,QAAQF,GAAGF,WAAH,EAAZ;AACAI,sBAAMC,MAAN,GAAe,YAAM;AACjB,wBAAI;AACA,4BAAIC,UAAU,IAAIpC,GAAGqC,SAAP,EAAd;AACAD,gCAAQE,eAAR,CAAwBJ,KAAxB;AACAE,gCAAQG,mBAAR;AACA,8BAAK7B,eAAL,CAAqB8B,WAArB,GAAmC,IAAIxC,GAAGyC,WAAP,CAAmBL,OAAnB,CAAnC;AACH,qBALD,CAKE,OAAOM,CAAP,EAAU;AACR1C,2BAAG2C,GAAH,CAAOD,CAAP;AACA,8BAAKhC,eAAL,CAAqBiB,IAArB,CAA0BiB,MAA1B,GAAmC,KAAnC;AACH;AACJ,iBAVD;AAWAV,sBAAMW,GAAN,GAAY3B,SAAZ;AACH,aAdD,CAcC,OAAOwB,CAAP,EAAU;AACP1C,mBAAG2C,GAAH,CAAOD,CAAP;AACA,qBAAKhC,eAAL,CAAqBiB,IAArB,CAA0BiB,MAA1B,GAAmC,KAAnC;AACH;AACJ,SAnBD,MAmBO;AACH5C,eAAG8C,MAAH,CAAUC,IAAV,CAAe;AACXC,qBAAK9B,SADM,EACK+B,MAAM;AADX,aAAf,EAEG,UAACC,GAAD,EAAMd,OAAN,EAAkB;AACjB,sBAAK1B,eAAL,CAAqB8B,WAArB,GAAmC,IAAIxC,GAAGyC,WAAP,CAAmBL,OAAnB,CAAnC;AACH,aAJD;AAKH;AACJ;AAvDI,CAAT","file":"GameOverRank.js","sourceRoot":"../../../../assets/Script","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    name: \"GameOverRank\",\n    properties: {\n        backSprite: cc.Node,\n        rankLabel: cc.Label,\n        avatarImgSprite: cc.Sprite,\n        nickLabel: cc.Label,\n        topScoreLabel: cc.Label,\n    },\n\n    init: function (rank, data,isPlayer) {\n        let avatarUrl = data.avatarUrl;\n        // let nick = data.nickname.length <= 10 ? data.nickname : data.nickname.substr(0, 10) + \"...\";\n        let nick = data.nickname;\n        let grade = data.KVDataList.length != 0 ? data.KVDataList[0].value : 0;\n\n        if (rank % 2 == 0) {\n            this.backSprite.color = new cc.Color(255,255, 255, 255);\n        }\n        if (isPlayer) {\n            this.rankLabel.node.color = new cc.Color(0, 255, 0, 255);\n        }\n        this.rankLabel.string = (rank + 1).toString();\n        this.createImage(avatarUrl);\n        this.nickLabel.string = nick;\n        this.topScoreLabel.string = grade.toString();\n    },\n    createImage(avatarUrl) {\n        if (window.wx != undefined) {\n            try {\n                let image = wx.createImage();\n                image.onload = () => {\n                    try {\n                        let texture = new cc.Texture2D();\n                        texture.initWithElement(image);\n                        texture.handleLoadedTexture();\n                        this.avatarImgSprite.spriteFrame = new cc.SpriteFrame(texture);\n                    } catch (e) {\n                        cc.log(e);\n                        this.avatarImgSprite.node.active = false;\n                    }\n                };\n                image.src = avatarUrl;\n            }catch (e) {\n                cc.log(e);\n                this.avatarImgSprite.node.active = false;\n            }\n        } else {\n            cc.loader.load({\n                url: avatarUrl, type: 'jpg'\n            }, (err, texture) => {\n                this.avatarImgSprite.spriteFrame = new cc.SpriteFrame(texture);\n            });\n        }\n    }\n\n});\n"]}